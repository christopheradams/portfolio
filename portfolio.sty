%%%
% Packages
%%%
\usepackage{xfp}
\usepackage{fontspec}
\usepackage{graphicx}
\usepackage[export]{adjustbox}
\usepackage[hidelinks]{hyperref}

%%%
% The Page
%%%

\setlrmarginsandblock{0.1\stockwidth}{*}{1}
\setulmarginsandblock{0.0833\stockwidth}{*}{1}

\checkandfixthelayout
\checkthelayout
\fixthelayout

\showtrimsoff

%%%
% Fonts
%%%

\setmainfont[
  Path = assets/fonts/Spectral/,
  UprightFont = *-Medium,
  ItalicFont = *-MediumItalic,
  BoldFont = *-Bold,
  BoldItalicFont = *-BoldItalic,
  FontFace = {el}{n}{*-ExtraLight},
  FontFace = {l}{n}{*-Light},
  FontFace = {eb}{n}{*-ExtraBold},
  Ligatures = TeX,
  Numbers = OldStyle]
{Spectral}

%%%
% Book
%%%

\makeatletter
\def\@maketitle{
  \newpage
  \vspace*{172pt}

  {
    \fontseries{el}\fontsize{72pt}{86pt}\selectfont

    \noindent\@title
  }

  \vfill

  \noindent{\itshape\@author, Taipei, \the\year}
}
\makeatother

%%%
% Pagination
%%%

\aliaspagestyle{part}{empty}

%%%
% Captions
%%%

\captiontitlefont{\itshape}
\captionstyle{\raggedright}

%%%
% Commands
%%%

\newcommand{\photograph}[2]{
  \photoblock{#1}{#2}{0}{0}
}

\newcommand{\landtoport}[3][0.5]{
  \photoblock{#2}{#3}{\fpeval{#1 * 0.5558}}{\fpeval{1 -  0.4442 - (#1 * 0.5558)}}
}

\newcommand{\photoblock}[4]{
  \def\lefttrim{#3}
  \def\righttrim{#4}

  \begin{figure}[t]
    \vskip 3pt
    \begin{minipage}[c][\textheight][c]{\textwidth}
      \vskip 1pt
      \vfill
      \adjincludegraphics[width=\textwidth, trim={{\lefttrim\width} 0 {\righttrim\width} 0},clip]{assets/img/#2}
      \vfill
      \legend{#1}
    \end{minipage}
  \end{figure}
  \clearpage
}

\newcommand{\photofigure}[3][0]{
  \begin{figure}[t]
    \vskip 3pt
    \begin{minipage}[c][\textheight][c]{\textwidth}
      \vskip 1pt
      \vfill
      \includegraphics[angle=-#1,origin=c,width=\textwidth]{assets/img/#3}
      \vfill
      \legend{#2}
    \end{minipage}
  \end{figure}
}
